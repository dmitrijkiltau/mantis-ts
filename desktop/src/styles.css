@import "./assets/css/theme.css";

@layer base {
  * {
    @apply box-border;
  }

  body {
    @apply relative isolate min-h-screen bg-canvas font-sans antialiased text-ink;
    background: radial-gradient(
        120% 120% at 15% 5%,
        var(--color-aurora),
        transparent 60%
      ),
      radial-gradient(
        120% 120% at 90% 15%,
        var(--color-aurora-secondary),
        transparent 55%
      ),
      linear-gradient(
        180deg,
        var(--color-canvas) 0%,
        var(--color-canvas-strong) 100%
      );

    &::before {
      content: "";
      @apply pointer-events-none fixed inset-0 z-0 opacity-20;
      background-image: radial-gradient(
        circle at 1px 1px,
        var(--color-dot) 1px,
        transparent 0
      );
      background-size: 24px 24px;
    }
  }

  button {
    @apply inline-flex items-center justify-center px-6 py-2;
    @apply text-sm font-semibold cursor-pointer rounded-full;
    @apply transition duration-200 ease-out;

    &:hover {
      @apply brightness-110;
    }

    &:active {
      @apply scale-[0.98];
    }

    &:disabled {
      @apply cursor-not-allowed opacity-60;
    }
  }
}

@layer components {
  .app-shell {
    @apply relative z-10 mx-auto flex min-h-screen w-full max-w-3xl flex-col gap-6 px-6 py-10;

    header {
      @apply rounded-2xl border bg-surface-soft p-5 backdrop-blur;
      @apply border-outline;
      box-shadow: 0 18px 40px var(--color-shadow-soft);

      &:hover .assistant-avatar-svg {
        @apply scale-150;
      }

      .hero-avatar {
        @apply flex flex-col items-center gap-3;
      }

      .avatar-canvas {
        @apply w-full grid place-items-center;

        .assistant-avatar-svg {
          @apply transition-transform duration-500 ease-out;
        }
      }

      .avatar-legend {
        @apply flex flex-col items-center gap-1 text-center;
      }

      .mood-chip {
        @apply inline-flex items-center gap-2 rounded-full border bg-surface-solid px-4 py-1.5 text-xs font-semibold uppercase tracking-[0.15em] text-ink;
        @apply border-outline;
        box-shadow: 0 10px 24px var(--color-shadow-soft);
      }

      .mood-chip[data-mood='listening'] {
        background: linear-gradient(120deg, rgba(34, 211, 238, 0.14), rgba(124, 92, 255, 0.18));
      }

      .mood-chip[data-mood='thinking'] {
        background: linear-gradient(120deg, rgba(245, 158, 11, 0.18), rgba(34, 211, 238, 0.12));
      }

      .mood-chip[data-mood='speaking'] {
        background: linear-gradient(120deg, rgba(16, 185, 129, 0.16), rgba(34, 211, 238, 0.16));
      }

      .mood-chip[data-mood='concerned'] {
        background: linear-gradient(120deg, rgba(249, 115, 22, 0.2), rgba(124, 92, 255, 0.12));
      }

      .avatar-hint {
        @apply text-xs leading-relaxed text-ink-muted;
      }
    }
  }

  #prompt-form {
    @apply grid gap-3 rounded-2xl border bg-surface-strong p-4;
    @apply border-outline;
    box-shadow: 0 16px 36px var(--color-shadow-soft);

    label {
      @apply text-[0.7rem] font-semibold uppercase tracking-[0.25em] text-ink-muted;
    }

    textarea {
      @apply min-h-32 w-full resize-y rounded-xl border;
      @apply bg-surface-solid px-4 py-3 text-base text-ink shadow-inner;
      @apply border-outline-strong;
      box-shadow: inset 0 1px 8px var(--color-shadow-soft);

      &:focus {
        @apply outline-none ring-2 ring-focus;
      }
    }

    button {
      @apply justify-self-end bg-linear-to-r from-cta to-cta-soft text-on-accent;
      box-shadow: 0 12px 24px var(--color-shadow-soft);
    }
  }

  .status {
    @apply rounded-full border bg-status-bg px-4 py-2 text-sm font-medium text-status;
    @apply border-status-border;
  }

  .history {
    @apply flex flex-col gap-4 font-mono text-sm text-ink-soft;

    .answer-card {
      @apply rounded-2xl border bg-card px-4 py-3;
      @apply border-card-border;
      box-shadow: 0 16px 36px var(--color-shadow-strong);

      h3 {
        @apply text-sm font-semibold text-accent;
      }

      pre {
        @apply mt-2 whitespace-pre-wrap wrap-break-word text-ink-soft;
      }

      p {
        @apply mt-2 text-xs text-ink-muted;
      }
    }
  }
}
