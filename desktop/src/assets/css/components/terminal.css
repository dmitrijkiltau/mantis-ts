@layer components {
  .input-terminal {
    @apply rounded-lg bg-bg-terminal border-2 border-primary-40 overflow-hidden relative;
    box-shadow: var(--shadow-glow-primary-soft), inset 0 1px 0 var(--color-primary-10);

    /* Subtle CRT curvature effect */
    &::before {
      content: "";
      @apply absolute inset-0 pointer-events-none rounded-lg z-10;
      background: radial-gradient(
        ellipse at center,
        transparent 70%,
        rgba(0, 0, 0, 0.08) 100%
      );
    }
  }

  .terminal-header {
    @apply flex items-center justify-between px-4 py-2 relative z-20;
    @apply bg-primary-10 border-b border-b-primary-30;

    /* Vault-Tec style decorative dots */
    &::before {
      content: "● ● ●";
      @apply absolute left-4 text-[8px] text-primary-40 tracking-widest;
      letter-spacing: 0.3em;
    }
  }

  .terminal-title {
    @apply text-xs font-bold tracking-wider ml-12;
    text-shadow: var(--shadow-text-primary);
  }

  #prompt-form {
    @apply grid grid-cols-1 gap-0;
  }

  .terminal-input {
    @apply w-full min-h-25 px-4 pt-4 pb-4 bg-transparent;
    @apply border-none outline-none font-mono resize-y;

    &::placeholder {
      @apply text-primary-40;
    }

    &:focus {
      @apply bg-primary-5;
    }
  }

  .terminal-button {
    @apply px-6 py-2 bg-primary-15 font-bold;
    @apply border-2 border-terminal-primary;
    @apply transition-all duration-200 ease-out;
    letter-spacing: 0.1em;

    .button-bracket {
      @apply inline-block transition-transform;
    }

    &:hover {
      @apply bg-primary-20 shadow-glow-primary-soft;

      .button-bracket:first-child {
        @apply -translate-x-3;
      }

      .button-bracket:last-child {
        @apply translate-x-3;
      }
    }

    &:disabled {
      @apply opacity-30 cursor-not-allowed;
    }

    &.slim {
      @apply w-full justify-center text-xs;
    }
  }

  .terminal-button--cancel {
    @apply bg-danger border-danger text-white;
    box-shadow: 0 0 25px rgba(239, 68, 68, 0.35);

    &:hover {
      background: var(--color-danger-40);
      box-shadow: 0 0 30px rgba(239, 68, 68, 0.6);
    }
  }

  .terminal-attachment {
    @apply flex items-center gap-3 px-4 py-2 text-xs;
    @apply border-t border-primary-30 bg-primary-10;
  }

  .terminal-attachment-label {
    @apply text-[10px] font-bold tracking-widest text-terminal-cyan;
  }

  .terminal-attachment-preview {
    @apply inline-flex items-center justify-center w-12 h-12 shrink-0;
    @apply rounded-sm border border-primary-30 bg-primary-5 overflow-hidden;
    line-height: 0;
  }

  .terminal-attachment-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .terminal-attachment-name {
    @apply text-[11px] font-mono;
  }

  #terminal-attachment-clear {
    @apply ml-auto;
  }

  .terminal-working-dir {
    @apply flex items-center gap-3 px-4 py-2 text-xs;
    @apply border-t border-primary-30 bg-primary-10;
  }

  .terminal-working-label {
    @apply text-[10px] font-bold tracking-widest text-terminal-cyan;
  }

  .terminal-working-value {
    @apply min-w-0 flex-1 text-[11px] font-mono truncate;
  }

  .terminal-working-dir[data-has-dir="false"] .terminal-working-value {
    @apply text-primary-40;
  }

  .terminal-working-actions {
    @apply flex items-center gap-2;
  }

  .terminal-actions {
    @apply flex items-center justify-between gap-3 px-4 py-3;
    @apply border-t border-primary-30 bg-primary-5;
  }

  .terminal-actions-left {
    @apply flex items-center gap-2;
  }

  .terminal-action-button {
    @apply px-3 py-1 text-[11px] font-bold;
    @apply border border-terminal-primary bg-primary-10;
    @apply transition-all duration-200 ease-out;
    letter-spacing: 0.1em;

    .button-bracket {
      @apply inline-block transition-transform;
    }

    &:hover {
      @apply bg-primary-20 shadow-glow-primary-soft;

      .button-bracket:first-child {
        @apply -translate-x-2;
      }

      .button-bracket:last-child {
        @apply translate-x-2;
      }
    }
  }

  .terminal-file-input {
    @apply hidden;
  }

  .input-terminal.is-dropping {
    @apply border-terminal-cyan;
    box-shadow: var(--shadow-glow-cyan), inset 0 1px 0 var(--color-primary-10);
  }

  .input-terminal.is-dropping .terminal-input {
    @apply bg-primary-10;
  }
}
